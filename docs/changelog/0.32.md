# IcyDB 0.32

This document aggregates detailed release notes for the `0.32.x` minor line.

---

## 0.32.3 - 2026-02-27 - Grouped Readiness Scaffolding

### ğŸ“ Summary

- Completed `0.32.3` grouped-readiness scaffolding without enabling grouped runtime execution.

### ğŸ”§ Changed

- Added one internal grouped query-to-executor handoff contract and wired grouped route planning through that boundary.
- Added explicit grouped error-conversion scaffolding for plan-domain grouped validation failures.
- Added grouped observability scaffolding fields for route outcome/rejection and grouped budget snapshots.
- Added grouped planner-to-executor aggregate-kind lowering adapter coverage to lock grouped terminal contract mapping ahead of runtime enablement.

### ğŸ§ª Testing

- Expanded grouped determinism fixtures across insertion-order and forced-hash-collision permutation matrices.
- Added grouped-disabled guardrail tests that lock grouped runtime and multi-terminal grouped reducer rejection behavior.
- Added frozen grouped handoff, grouped lowering, route observability, and grouped budget observability vectors to lock pre-enable contracts.
- Added grouped continuation-token wire vector coverage plus grouped cursor negative/revalidate vectors (unsupported version, oversized payload, signature mismatch, direction mismatch, and offset mismatch).
- Added compile-fail boundary tests to lock grouped internals and to ensure scalar session APIs do not expose `execute_grouped(...)` or `group_by(...)` before `0.33`.

---

## 0.32.2 - 2026-02-27 - Restructuring db/

### ğŸ“ Summary

- Continued `db/` boundary cleanup by consolidating access-plan canonicalization and tightening pushdown ownership contracts.

### ğŸ”§ Changed

- Moved `value_hash.rs` back to `value/hash.rs` and relocated tests.
- Moved `group_key.rs` to `executor/group/key.rs`.
- Added canonical `AccessPlan::union(...)` and `AccessPlan::intersection(...)` constructors to flatten nested composites and collapse empty/single-child composite shapes.
- Tightened pushdown ownership by making `SecondaryOrderPushdownEligibility` crate-scoped and keeping surface projection through explain-facing contracts.
- Replaced string-only index-range detail plumbing with typed index references, converting to index names only at rejection/report boundaries.

---

## 0.32.1 - 2026-02-27

### ğŸ“ Summary

- Tightened grouped aggregate execution scaffolding and standardized audit telemetry capture.

### ğŸ”§ Changed

- Tightened grouped state creation under `ExecutionContext` by validating grouped hard-limit configuration at the creation boundary.
- Removed clippy-cleanup scaffolding in grouped state construction and aggregate terminal routing to keep `-D warnings` runs clean.
- Moved large aggregate contract tests out of inline `contracts.rs` into `executor/aggregate/tests/contracts.rs` to align with the repository test-layout contract.
- Moved additional inline test modules into dedicated files: `executor/aggregate/field` now uses `field/tests.rs`, and index-key codec tests now live in `index/key/codec/tests.rs`.
- Kept grouped runtime behavior unchanged: grouped execution remains disabled in this patch line.

### ğŸ“š Documentation

- Standardized audit telemetry docs to use `scripts/dev/cloc.sh` for test/non-test codebase size snapshots instead of manual split `cloc` commands.

```bash
scripts/dev/cloc.sh --include-lang=Rust

=== Test files ===
      69 text files.
      56 unique files.
      13 files ignored.

github.com/AlDanial/cloc v 1.98  T=0.05 s (1131.0 files/s, 659562.8 lines/s)
-------------------------------------------------------------------------------
Language                     files          blank        comment           code
-------------------------------------------------------------------------------
Rust                            56           2929            365          29363
-------------------------------------------------------------------------------
SUM:                            56           2929            365          29363
-------------------------------------------------------------------------------

=== Non-test files ===
     449 text files.
     445 unique files.
       4 files ignored.

github.com/AlDanial/cloc v 1.98  T=0.12 s (3801.8 files/s, 608830.6 lines/s)
-------------------------------------------------------------------------------
Language                     files          blank        comment           code
-------------------------------------------------------------------------------
Rust                           429           9408           8281          53282
TOML                             8             22              0            172
Markdown                         8             39              0             59
-------------------------------------------------------------------------------
SUM:                           445           9469           8281          53513
-------------------------------------------------------------------------------
```

---

## 0.32.0 - 2026-02-27 - Grouped Execution Budget Plumbing

### ğŸ“ Summary

- Added planner-to-executor grouped budget plumbing and deterministic grouped aggregate substrate while keeping grouped runtime disabled.

### ğŸ”§ Changed

- Split query planning internals into `db::query::plan::mod` + `db::query::plan::planner` to keep plan contracts and planner logic separate.
- Unified scalar aggregate terminal state creation behind `AggregateStateFactory::create_terminal(...)` so streaming and materialized paths use one state model.
- Added grouped aggregate state substrate with deterministic finalize ordering, hash-collision safety, and canonical group-key ordering contracts.
- Added grouped execution policy/context contracts (`GroupedExecutionConfig`, `ExecutionConfig`, `ExecutionContext`) and threaded grouped budget accounting through one executor-owned boundary.
- Added hard grouped guardrails for `max_groups` and estimated grouped bytes, with bounded default grouped limits for scaffolded executor policy resolution.
- Kept grouped runtime execution disabled; grouped plans still route to materialized blocking shape and reject grouped reducer execution in this release.

### ğŸ§ª Testing

- Added grouped substrate tests for deterministic collision handling, hard-limit enforcement, and budget-failure atomicity (no partial grouped output on failure).
- Added grouped policy bridge tests to lock planner-config-to-executor-config mapping and default grouped context limits.
- Added grouped route tests to lock blocking/materialized shape and no-streaming-hint behavior, including tight-budget grouped config cases.
