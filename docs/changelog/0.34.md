# IcyDB 0.34

This document aggregates detailed release notes for the `0.34.x` minor line.

---

## 0.34.0 - 2026-02-28 - Commit Narrative Consolidation and No-Shim Recovery

### ðŸ“ Summary

0.34.0 starts the `0.34` clarity/consolidation track with a focused pass over commit execution internals, improving module responsibility narration and phase-level invariant readability while also removing compatibility shims in the commit recovery path.

### ðŸ”§ Changed - Commit Module Narrative

- Added explicit module-boundary responsibility headers in `db::commit::{apply,prepare,replay}` to document semantic ownership and one-way layer dependencies.
- Added phase-level comments in long commit preparation/replay/apply paths to make ordering assumptions and fail-closed behavior explicit at the call-site level.
- Clarified mechanical-apply sequencing intent (`index -> row`) and deterministic replay/rebuild flow, reducing ambiguity for future structural consolidation work.
- Split prepared-op payload ownership into a dedicated `db::commit::prepared_op` module and kept `db::commit::apply` focused on mutation application behavior.
- Split recovery index-rebuild ownership into a dedicated `db::commit::rebuild` module and kept `db::commit::replay` focused on marker row-op replay.
- Extended the same boundary/phase comment pass through `db::commit::{store,memory,rollback}` and removed a one-call recovery marker-clear wrapper in favor of direct `with_commit_store(...).clear_infallible()` at the recovery boundary.

### ðŸ”§ Changed - Compatibility Removal

- Removed the write-only recovery shim (`ensure_recovered_for_write`) and converged call sites on `ensure_recovered`.
- Removed commit-marker schema-fingerprint fallback behavior: replay now requires explicit fingerprint presence and exact match.

### ðŸ§­ Migration Notes

- Internal commit/recovery APIs are intentionally non-backward-compatible in this release (shim paths removed).
- Legacy commit markers without schema fingerprints are no longer replayable.

### ðŸ§ª Testing

- Re-ran `cargo check -p icydb-core` after the commit-module refactors and no-shim compatibility removals.
