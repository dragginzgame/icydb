[0.34.0] â€“ 2026-XX-XX â€“ Ordered Group Execution & Planner Strategy Upgrade
ğŸš€ Added

Ordered-stream GROUP BY execution strategy

When input is ordered by the grouping key (e.g. via index prefix alignment), grouping is now performed incrementally.

Enables O(1) memory grouped aggregation for ordered inputs.

Eliminates full in-memory hash buffering when ordering guarantees exist.

Planner detection for index-prefix grouping eligibility

Planner now detects when grouping fields align with index prefix order.

Routes grouped queries to ordered execution strategy automatically.

Runtime grouping strategy branching

Introduced explicit execution modes:

HashGroup (unordered input)

OrderedGroup (ordered input)

Routing decision is explicit and capability-driven.

Streaming group reduction

Groups are emitted incrementally during traversal when ordered strategy is selected.

Enables large grouped scans without proportional memory growth.

ğŸ§  Planner & Routing Improvements

Grouped execution now participates in capability gating.

Route layer no longer performs implicit grouping assumptions.

Group execution mode is selected explicitly at queryâ†’executor boundary.

Improved plan metrics to record grouped execution strategy.

ğŸ— Internal Improvements

Consolidated grouped execution handoff contract.

Hardened group key ordering invariants for ordered-stream execution.

Improved aggregate runtime contract enforcement during grouped streaming.

Strengthened invariant guards around grouped plan shapes.

ğŸ”’ Correctness & Guarantees

Data-store remains authoritative; index scans continue to validate rows via primary store read.

Ordered grouping relies only on deterministic index key ordering.

No semantic changes to GROUP BY result correctness.

No API breaking changes.

âš¡ Performance Impact

Dramatically reduced memory usage for grouped queries over ordered index scans.

Reduced latency for large grouped scans with aligned index prefixes.

Improved scalability for high-cardinality group sets under ordered access paths.

ğŸ§© Compatibility

Fully backward compatible.

Existing grouped queries continue to execute via hash grouping when ordering guarantees are not present.

ğŸ” Notes

This release marks the introduction of execution-strategy specialization for grouped queries. It establishes the foundation for future enhancements such as HAVING pushdown, streaming aggregate optimizations, and memory-budget enforcement.