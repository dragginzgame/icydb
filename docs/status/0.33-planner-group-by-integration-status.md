# 0.33 Status (as of 2026-02-27)

## 0.33 Scope

This status tracks planner and `GROUP BY` integration work from:

- `docs/design/0.33-planner-group-by-integration.md`

`0.33` is the first release line that enables explicit grouped planning/execution
surfaces with additive APIs.

---

## In Scope (`0.33.x`)

- explicit `LogicalPlan` variant split (`Scalar` vs `Grouped`)
- grouped execution through explicit blocking grouped path
- grouped cursor protocol wiring (`GroupedContinuationToken` + resume/revalidate)
- grouped response surface extension (`Rows` vs `GroupedRows`)
- explicit session grouped API (`execute_grouped(...)`)
- grouped contract-spec freeze before runtime enablement

## Out of Scope (`0.33.x`)

- implicit grouped behavior through scalar APIs
- scalar/grouped return-type overloading or auto-detection
- grouped streaming/pushdown beyond blocking-first rollout
- cardinality-estimation-driven grouped planning policy (optional follow-up)

---

## Release Snapshot (`0.33.x`)

- [ ] `0.33.0` released
- [ ] GROUP BY contract spec frozen (ordering, null semantics, equality, limits, cursor resume, error taxonomy)
- [ ] Planner emits exclusive `LogicalPlan::{Scalar, Grouped}` variants
- [ ] Variant exclusivity/property tests added (no transitional/coerced states)
- [ ] Grouped blocking execution path enabled behind explicit grouped plan
- [ ] Grouped cursor anchor semantics wired via `last_group_key` + offset compatibility checks
- [ ] Grouped response variant surfaced and scalar response contracts preserved
- [ ] Session grouped API added (`execute_grouped(...)`) without scalar API leakage
- [ ] Changelog entry added for `0.33.0`

Current `0.33.x` status: **not started (design-ready)**.

---

## Phase Tracker

### Phase 0 - Contract Freeze

- [ ] GROUP BY contract spec document created and reviewed
- [ ] Ordering/null/equality/limit/cursor/error semantics approved

### Phase 1 - Planner Variant Split

- [ ] `LogicalPlan::Scalar` and `LogicalPlan::Grouped` split implemented
- [ ] Planner emits grouped variant only for grouped intent
- [ ] Explain/serialization boundaries keep explicit variant distinction

### Phase 2 - Response Surface

- [ ] Grouped response variant added
- [ ] Scalar response contracts unchanged and non-implicit

### Phase 3 - Grouped Execution Path

- [ ] Grouped blocking reducer path enabled
- [ ] Deterministic grouped finalization preserved
- [ ] Group budget enforcement behavior aligned with frozen contract

### Phase 4 - Grouped Cursor Protocol

- [ ] Grouped cursor encode/decode/revalidate wired end-to-end
- [ ] Resume anchored by `last_group_key` semantics (not offset-only)

### Phase 5 - Session API

- [ ] `execute_grouped(...)` surfaced on session boundary
- [ ] Scalar API boundary guards remain intact

---

## Exit Criteria (`0.33`)

`0.33` is complete when all are true:

1. grouped intent is represented by explicit grouped plan variants only
2. grouped execution is reachable only through grouped APIs and response variants
3. grouped cursor resume is anchor-based and contract-tested
4. scalar API behavior remains additive and unchanged
5. grouped contract semantics are documented and test-covered

---

## Verification Readout (Current)

Current implementation status: no `0.33` runtime implementation landed yet.

Recommended verification sequence once implementation starts:

- `cargo check -p icydb-core`
- `cargo test -p icydb-core query::plan:: -- --nocapture`
- `cargo test -p icydb-core grouped_ -- --nocapture`
- `cargo test -p icydb-core --test compile_fail -- --nocapture`
- `cargo test -p icydb-core`
