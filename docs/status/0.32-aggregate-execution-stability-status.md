# 0.32 Status (as of 2026-02-27)

## 0.32 Scope

This status tracks aggregate execution stabilization and grouped-readiness scaffolding from:

- `docs/design/0.32-aggregate-execution-stability.md`

`0.32` is substrate-only and must not ship public grouped runtime behavior.

---

## In Scope (`0.32.x`)

- scalar aggregate state-machine unification under one factory boundary
- grouped aggregate substrate with deterministic ordering/finalization
- grouped execution budget/config/context plumbing (planner -> executor bridge)
- grouped hard limit enforcement (`max_groups`, `max_group_bytes`)
- grouped route shape lock (materialized/blocking posture only)
- internal grouped handoff contract (query -> executor boundary)
- grouped error mapping scaffolding while grouped runtime remains gated
- grouped observability schema lock-in (route and budget projection fields)
- grouped compatibility vectors for pre-enable wire-shape stability
- grouped disabled-path guardrails and boundary compile-fail locks
- release bookkeeping updates for `0.32.x`

## Out of Scope (`0.32.x`)

- public grouped runtime execution enablement
- grouped continuation pagination/runtime cursor semantics
- grouped public response/API surface (`execute_grouped`, grouped response variant)
- end-to-end public grouped error taxonomy enablement (planned for `0.33`)
- execution-shape public taxonomy replacement beyond existing route mode contracts

---

## Release Snapshot (`0.32.x`)

- [x] `0.32.0` released
- [x] `0.32.1` released
- [x] `0.32.2` released
- [ ] `0.32.3` released
- [x] Query planning module split to `query/plan/mod.rs` + `query/plan/planner.rs`
- [x] Scalar terminal aggregates instantiate via one `AggregateStateFactory::create_terminal(...)` boundary
- [x] Materialized and streaming scalar terminal paths use unified terminal state model
- [x] Grouped aggregate substrate introduced with deterministic finalization order
- [x] Hash-collision grouped finalization determinism covered by tests
- [x] Grouped hard limits introduced for group count and estimated grouped bytes
- [x] Grouped budget failure atomicity covered by tests (no partial grouped output on failure)
- [x] Planner-side grouped budget contract (`GroupedExecutionConfig`) added
- [x] Executor-side grouped policy/context bridge (`ExecutionConfig`/`ExecutionContext`) added
- [x] Grouped route shape locked to materialized/initial/no streaming hints
- [x] Internal grouped handoff contract added and routed through one boundary
- [x] Grouped planner-to-executor lowering matrix coverage added
- [x] Grouped route and budget observability vectors locked by tests
- [x] Grouped cursor compatibility and negative/revalidate vectors added
- [x] Grouped internals and scalar-session surface locked by compile-fail tests
- [x] Grouped runtime remains explicitly disabled in executor reducer-stage gate
- [x] Changelog entries added for `0.32.0`, `0.32.1`, `0.32.2`, and `0.32.3`

Current `0.32.x` status: **in progress (`0.32.3` release pending)**.

---

## Exit Criteria (`0.32`)

`0.32` is complete when all are true:

1. scalar aggregate terminals route through one state factory boundary
2. grouped substrate is deterministic under insertion-order and hash-collision variation
3. grouped hard limits are enforced with typed grouped-domain errors
4. grouped budget failure preserves already-committed grouped state (no partial leakage)
5. planner-side grouped budget config is plumbed to executor policy bridge
6. grouped runtime execution remains disabled for this release line

---

## Deferred to `0.33`

- public grouped runtime execution enablement
- grouped continuation pagination/runtime cursor semantics
- grouped public response/API surface (`execute_grouped`, grouped response variant)
- end-to-end public grouped error taxonomy enablement
- execution-shape public taxonomy replacement beyond existing route mode contracts

Deferred implementation tracking now lives in:

- `docs/status/0.33-planner-group-by-integration-status.md`

## Verification Readout (Current)

Executed for current `0.32` slice:

- `cargo fmt --all` (pass)
- `cargo check -p icydb-core` (pass)
- `cargo test -p icydb-core grouped_aggregate_state_ -- --nocapture` (pass)
- `cargo test -p icydb-core grouped_execution_config_from_planner_config_prefers_planner_limits -- --nocapture` (pass)
- `cargo test -p icydb-core grouped_execution_context_from_planner_config_defaults_when_absent -- --nocapture` (pass)
- `cargo test -p icydb-core route_plan_grouped_wrapper_maps_to_grouped_case_materialized_without_fast_paths -- --nocapture` (pass)
- `cargo test -p icydb-core route_plan_grouped_wrapper_keeps_blocking_shape_under_tight_budget_config -- --nocapture` (pass)
- `cargo test -p icydb-core grouped_plan_rejects_empty_group_fields -- --nocapture` (pass)
- `cargo test -p icydb-core db::cursor::grouped::tests:: -- --nocapture` (pass)
- `cargo test -p icydb-core grouped_executor_handoff_contract_matrix_vectors_are_frozen -- --nocapture` (pass)
- `cargo test -p icydb-core route_plan_grouped_wrapper_lowers_supported_target_field_matrix_into_executor_contract -- --nocapture` (pass)
- `cargo test -p icydb-core route_plan_grouped_wrapper_observability_vector_is_frozen -- --nocapture` (pass)
- `cargo test -p icydb-core grouped_budget_observability_contract_vectors_are_frozen -- --nocapture` (pass)
- `cargo test -p icydb-core --test compile_fail -- --nocapture` (pass)
- `cargo clippy -p icydb-core --all-targets -- -D warnings` (blocked in this environment: `Invalid cross-device link (os error 18)`)
