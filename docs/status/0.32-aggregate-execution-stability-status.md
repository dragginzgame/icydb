# 0.32 Status (as of 2026-02-27)

## 0.32 Scope

This status tracks aggregate execution stabilization from:

- `docs/design/0.32-aggregate-execution-stability.md`

`0.32` is substrate-only and must not ship public grouped runtime behavior.

---

## In Scope (`0.32.0`)

- scalar aggregate state-machine unification under one factory boundary
- grouped aggregate substrate with deterministic ordering/finalization
- grouped execution budget/config/context plumbing (planner -> executor bridge)
- grouped hard limit enforcement (`max_groups`, `max_group_bytes`)
- grouped route shape lock (materialized/blocking posture only)
- release bookkeeping updates for `0.32.0`

## Out of Scope (`0.32.0`)

- public grouped runtime execution enablement
- grouped continuation pagination/runtime cursor semantics
- grouped public response/API surface (`execute_grouped`, grouped response variant)
- end-to-end public grouped error taxonomy enablement (planned for `0.33`)
- execution-shape public taxonomy replacement beyond existing route mode contracts

---

## Release Snapshot (`0.32.0`)

- [ ] `0.32.0` released
- [x] Query planning module split to `query/plan/mod.rs` + `query/plan/planner.rs`
- [x] Scalar terminal aggregates instantiate via one `AggregateStateFactory::create_terminal(...)` boundary
- [x] Materialized and streaming scalar terminal paths use unified terminal state model
- [x] Grouped aggregate substrate introduced with deterministic finalization order
- [x] Hash-collision grouped finalization determinism covered by tests
- [x] Grouped hard limits introduced for group count and estimated grouped bytes
- [x] Grouped budget failure atomicity covered by tests (no partial grouped output on failure)
- [x] Planner-side grouped budget contract (`GroupedExecutionConfig`) added
- [x] Executor-side grouped policy/context bridge (`ExecutionConfig`/`ExecutionContext`) added
- [x] Grouped route shape locked to materialized/initial/no streaming hints
- [x] Grouped runtime remains explicitly disabled in executor reducer-stage gate
- [x] Changelog entry added for `0.32.0`

Current `0.32.0` status: **in progress (release gate pending)**.

---

## Exit Criteria (`0.32`)

`0.32` is complete when all are true:

1. scalar aggregate terminals route through one state factory boundary
2. grouped substrate is deterministic under insertion-order and hash-collision variation
3. grouped hard limits are enforced with typed grouped-domain errors
4. grouped budget failure preserves already-committed grouped state (no partial leakage)
5. planner-side grouped budget config is plumbed to executor policy bridge
6. grouped runtime execution remains disabled for this release line

---

## Verification Readout (Current)

Executed for current `0.32` slice:

- `cargo fmt --all` (pass)
- `cargo check -p icydb-core` (pass)
- `cargo test -p icydb-core grouped_aggregate_state_ -- --nocapture` (pass)
- `cargo test -p icydb-core grouped_execution_config_from_planner_config_prefers_planner_limits -- --nocapture` (pass)
- `cargo test -p icydb-core grouped_execution_context_from_planner_config_defaults_when_absent -- --nocapture` (pass)
- `cargo test -p icydb-core route_plan_grouped_wrapper_maps_to_grouped_case_materialized_without_fast_paths -- --nocapture` (pass)
- `cargo test -p icydb-core route_plan_grouped_wrapper_keeps_blocking_shape_under_tight_budget_config -- --nocapture` (pass)
- `cargo test -p icydb-core grouped_plan_rejects_empty_group_fields -- --nocapture` (pass)
- `cargo clippy -p icydb-core --all-targets -- -D warnings` (blocked in this environment: `Invalid cross-device link (os error 18)`)
