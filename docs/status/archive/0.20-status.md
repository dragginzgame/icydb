# 0.20 Status (as of 2026-02-20)

## 0.20 Scope

This status tracks DISTINCT support from:

- `docs/design/0.20-distinct.md`

In scope for `0.20`:

- DISTINCT over full entity rows (ordered stream semantics)
- DISTINCT compatibility across `ByKey`, `KeyRange`, `IndexPrefix`, `IndexRange`, `Union`, `Intersection`
- DISTINCT compatibility with pagination and continuation
- DISTINCT compatibility with ASC and DESC traversal

Out of scope for `0.20`:

- DISTINCT over projections
- `COUNT DISTINCT`
- `DISTINCT ON`
- hash-based DISTINCT

---

## Release Snapshot

- [ ] `0.20.0` not released
- [x] Milestone tracker created
- [x] Planner/query surface for DISTINCT (`Query::distinct()` + `LogicalPlan` flag)
- [x] Ordered DISTINCT stream wrapper (`DistinctOrderedKeyStream`)
- [x] Executor wiring for DISTINCT in both fast-path and fallback paths
- [x] Pagination/continuation DISTINCT matrix coverage
- [ ] Full regression sweep re-run and green

Overall status: **in progress; DISTINCT planner/executor work and pagination matrix coverage are complete**.

---

## Current Baseline

- Ordered stream execution is already in place and is the intended insertion point for DISTINCT.
- Existing stream combinators already suppress many duplicate shapes; 0.20 focuses on final ordered-stream dedup semantics.
- `Query::distinct()` now sets a `distinct` flag on `LogicalPlan`.
- `ExplainPlan`, fingerprint hashing, and continuation signature hashing now include DISTINCT state.
- Added `DistinctOrderedKeyStream` and wired DISTINCT stream wrapping in both fast-path and fallback execution before materialization.

---

## Next Slice

1. Re-run full regression sweep.

---

## Verification Run (this pass)

- `cargo check -p icydb-core` (pass)
- `cargo check -p icydb-core --tests` (pass)
- `cargo test -p icydb-core query_distinct -- --nocapture` (pass)
- `cargo test -p icydb-core signature_changes_when_distinct_flag_changes -- --nocapture` (pass)
- `cargo test -p icydb-core fingerprint_changes_with_distinct_flag -- --nocapture` (pass)
- `cargo test -p icydb-core load_distinct_flag_preserves_union_pagination_rows_and_boundaries -- --nocapture` (pass)
- `cargo test -p icydb-core load_distinct_union_resume_matrix_is_boundary_complete -- --nocapture` (pass)
- `cargo fmt --all -- --check` (pass)
