# 0.22 Status (as of 2026-02-21)

## 0.22 Scope

This status tracks streaming aggregates from:

- `docs/design/0.22-streaming-aggregates.md`

In scope for `0.22`:

- load-query aggregate terminals: `count`, `exists`, `min`, `max`
- primary-key aggregate semantics for `min`/`max` (`Option<Id<E>>`)
- aggregate execution through the same key-stream routing path used by load execution
- aggregate parity with DISTINCT and page windows (`offset`/`limit`)

Out of scope for `0.22`:

- `SUM`, `AVG`, `COUNT DISTINCT`, `GROUP BY`
- field-value aggregates (for example `MIN(price)`)
- cursor-paged aggregate API
- COUNT pushdown in `0.22.0` (deferred and shipped in `0.22.1`)

---

## Release Snapshot

- [x] `0.22.0` released
- [x] `0.22.1` released
- [x] Milestone tracker created
- [x] Session aggregate terminals added (`count`, `exists`, `min`, `max`)
- [x] Load executor aggregate path added (streaming + fallback)
- [x] Shared streaming-safety gate added in `LogicalPlan`
- [x] Direction-aware `MIN`/`MAX` behavior added for ordered streams
- [x] Aggregate parity coverage expanded across key path families
- [x] COUNT pushdown subset guard added for post-`0.22.0` work
- [x] COUNT pushdown shipped for eligible query shapes (`0.22.1`)

Overall status: **shipped; 0.22 scope is implemented and release gates are green**.

---

## Current Baseline (`0.22.1`)

- Aggregate terminals are wired on fluent load query surfaces (`FluentLoadQuery` in core and facade).
- Aggregate execution reuses load key-stream routing and DISTINCT wrapping.
- Streaming eligibility is centralized to avoid drift between aggregate and load execution rules.

```text
count_pushdown_eligible âŠ† streaming_aggregate_eligible
```

---

## Next Slice

1. Keep `0.22.x` as stabilization and documentation-alignment only.
2. Track any aggregate parity regressions against the existing streaming-safety gate.
3. `0.23.0`: execute numeric consolidation and decimal-primitive rewrite from `docs/design/0.23-decimal-consolidation.md`.
4. `0.24.0`: add aggregate-aware fast-path variants where they are semantics-safe.

---

## Verification Run (this pass)

- `make fmt-check` (pass)
- `make clippy` (pass)
- `cargo check --workspace` (pass)
- `make test` (pass)
